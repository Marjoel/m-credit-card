!function(){"use strict";angular.module("mCreditCard",[])}(),function(){"use strict";function a(a){function b(b,e,f,g){b.$watch(f.ngModel,function(b,h){if(h!=b){var i=a.isCardValidByBrand(b);c(e),i&&d(e,b),g.$setValidity(f.ngModel,i)}})}function c(b){for(var c=a.getAcceptedBrands(),d=c.length,e="";d--;)e=e+" "+c[d].brand;b.parent().children().removeClass(e)}function d(b,c){b.parent().children().addClass(a.getCardBrand(c))}return{restrict:"A",require:"ngModel",link:b}}angular.module("mCreditCard").directive("mCreditCard",a),a.$inject=["CreditCardFactory"]}(),function(){"use strict";function a(){function a(a){return c(a)}function b(a){if(!a)return!1;if(a=f(a),a.length<12||a.length>16)return!1;for(var b=0,c=0,d=!1,e=a.length-1;e>=0;e--){var g=a.charAt(e);c=parseInt(g,10),d&&(c*=2)>9&&(c-=9),b+=c,d=!d}return b%10===0}function c(a){return""!==d(a)}function d(a){if(!a||!b(a))return"";a=f(a);for(var c=e(),d=c.length;d--;)if(c[d].rule.test(a))return c[d].brand;return""}function e(){return[{brand:"discover",rule:/^(6011)[0-9]{12}|(622)[0-9]{13}|(64|65)[0-9]{14}$/},{brand:"aura",rule:/^(50)[0-9]{14}$/},{brand:"elo",rule:/^(506|509|636)[0-9]{13}|(4573|4576|6500|6504|6505|6507|6509|6516|6550)[0-9]{12}|(401178|401179|431274|438935|451416|504175|627780)[0-9]{10}$/},{brand:"amex",rule:/^(34|37)[0-9]{13}$/},{brand:"jcb",rule:/^(3088|3096|3112|3158|3337)[0-9]{12}|(35)[0-9]{14}$/},{brand:"hipercard",rule:/^606282[0-9]{10}$/},{brand:"diners",rule:/^30[0-5]{1}[0-9]{11}|(36|38|39)[0-9]{12}$/},{brand:"hiper",rule:/^637(095|568|599|600|609|612)[0-9]{10}$/},{brand:"mastercard",rule:/^(2|5)[0-9]{15}$/},{brand:"visa",rule:/^4[0-9]{12,15}$/}]}function f(a){return a?a.replace(/[^\d]+/g,""):a}return{isCardValid:a,isCardValidByLuhn:b,isCardValidByBrand:c,getCardBrand:d,getAcceptedBrands:e}}angular.module("mCreditCard").factory("CreditCardFactory",a)}();